!function(){let searchBtn,select;function searchEvent(){let word=document.getElementById("input-content").value.trim();if(word){word=filterWord(word);let key,baseURL,searchURL=engineCheck(document.querySelector(".engine-select").getAttribute("data-value"))+word;window.location.href=searchURL}}function filterWord(word){return word=word.replace(" ","+")}function showEngine(options){let select=document.getElementsByClassName("engine-select")[0];select.setAttribute("data-value",options.value),select.innerHTML=options.name}function saveConfig(options){localStorage.setItem("name",options.name),localStorage.setItem("value",options.value)}function getConfig(){let name,value;return{name:localStorage.getItem("name"),value:localStorage.getItem("value")}}function engineCheck(key){return 1===(key="number"!=typeof key?+key:key)?"https://www.google.com/search?q=":2===key?"https://cn.bing.com/search?q=":3===key?"https://www.baidu.com/s?wd=":"https://www.google.com/search?q="}window.onload=function(){if(fetch("./config.json").then(res=>res.json()).then(data=>{let headerDetail=data["header-detail"],engine=data.engine;console.log("网页版本：",data.version),document.querySelector(".header-detail").innerText=headerDetail;let str="";engine.forEach(ele=>{str+=`<div class="engine-item" data-value="${ele.value}">${ele.name}</div>|`}),str=str.slice(0,str.length-1),document.querySelector(".engine-select-content").innerHTML=str}),localStorage.length){let options;showEngine(getConfig())}},document.getElementById("search").addEventListener("click",searchEvent),document.onkeyup=function(e){var event=e||window.event,key;13==(event.which||event.keyCode||event.charCode)&&searchEvent()},document.getElementsByClassName("engine-select")[0].addEventListener("click",(function(){let selectBox=document.getElementsByClassName("engine-select-box")[0],show=selectBox.classList.contains("active");selectBox.onclick=show?null:function(e){let target;if("engine-item"===e.target.className){let name,value,options={name:e.target.innerHTML,value:e.target.getAttribute("data-value")};return showEngine(options),saveConfig(options),selectBox.classList.remove("active"),void(selectBox.onclick=null)}},selectBox.classList.toggle("active")}))}();